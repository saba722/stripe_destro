(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,a){e.exports=a.p+"static/media/login.9a76e74e.svg"},149:function(e,t,a){},197:function(e,t,a){e.exports=a(369)},202:function(e,t,a){},228:function(e,t,a){},365:function(e,t,a){},369:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o),c=(a(202),a(37)),s=a(38),l=a(46),u=a(39),d=a(47),m=a(379),h=a(372),p=a(381),f=a(111),g=a.n(f),v=a(54),E=a.n(v),b=function(e){e?E.a.defaults.headers.common.Authorization=e:delete E.a.defaults.headers.common.Authorization},y=function(e){return{type:"SET_CURRENT_USER",payload:e}},O=function(){return function(e){localStorage.removeItem("jwtToken"),b(!1),e(y({}))}},w=a(59),C=a(63),S=a(168),N=a(62),j=a(227),k={isAuthenticated:!1,user:{},loading:!1},R={},I=Object(C.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(N.a)({},e,{isAuthenticated:!j(t.payload),user:t.payload});case"USER_LOADING":return Object(N.a)({},e,{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),x=[S.a],T=Object(C.e)(I,{},Object(C.d)(C.a.apply(void 0,x),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__()||C.d)),D=(a(228),a(85)),A=a(112),L=a.n(A),P=(a(149),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(D.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={email:"",password:"",errors:{}},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&(window.location.href="/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&(window.location.href="/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"base-container",ref:this.props.containerRef},r.a.createElement("div",{className:"header"},"Login"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:L.a,alt:"Login"})),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",placeholder:"Username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",placeholder:"Password"})))),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{type:"button",className:"btn",onClick:this.onSubmit},"Login")))}}]),t}(n.Component)),_=Object(w.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){E.a.post("https://stripe-coupons-1.herokuapp.com/api/users/login",e).then(function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),b(a);var n=g()(a);t(y(n))}).catch(function(e){return t({type:"GET_ERRORS",payload:e.response.data})})}}})(P),U=a(380),M=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onChange=function(t){e.setState(Object(D.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={name:"",email:"",password:"",password2:"",errors:{}},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&(window.location.href="/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"base-container",ref:this.props.containerRef},r.a.createElement("div",{className:"header"},"Register"),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:L.a,alt:"Register"})),r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",placeholder:"Username"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,id:"email",type:"email",placeholder:"Email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",placeholder:"Password"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Confirm Password"),r.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,id:"password2",type:"password",placeholder:"Confirm Password"})))),r.a.createElement("div",{className:"footer"},r.a.createElement("button",{type:"button",onClick:this.onSubmit,className:"btn"},"Register")))}}]),t}(n.Component),W=Object(w.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){E.a.post("https://stripe-coupons-1.herokuapp.com/api/users/register",e).then(function(e){return t.push("/dashboard")}).catch(function(e){return a({type:"GET_ERRORS",payload:e.response.data})})}}})(Object(U.a)(M)),F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isLogginActive:!0},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.rightSide.classList.add("right")}},{key:"changeState",value:function(){this.state.isLogginActive?(this.rightSide.classList.remove("right"),this.rightSide.classList.add("left")):(this.rightSide.classList.remove("left"),this.rightSide.classList.add("right")),this.setState(function(e){return{isLogginActive:!e.isLogginActive}})}},{key:"render",value:function(){var e=this,t=this.state.isLogginActive,a=t?"Register":"Login",n=t?"login":"register";return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"container",ref:function(t){return e.container=t}},t&&r.a.createElement(_,{containerRef:function(t){return e.current=t}}),!t&&r.a.createElement(W,{containerRef:function(t){return e.current=t}})),r.a.createElement(q,{current:a,currentActive:n,containerRef:function(t){return e.rightSide=t},onClick:this.changeState.bind(this)})))}}]),t}(r.a.Component),q=function(e){return r.a.createElement("div",{className:"right-side",ref:e.containerRef,onClick:e.onClick},r.a.createElement("div",{className:"inner-container"},r.a.createElement("div",{className:"text"},e.current)))},Y=F,z=a(194),G=a(378),K=Object(w.b)(function(e){return{auth:e.auth}})(function(e){var t=e.component,a=e.auth,n=Object(z.a)(e,["component","auth"]);return r.a.createElement(h.a,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(G.a,{to:"/"})}}))}),V=a(104),X=a.n(V),B=a(140),H=a(376),J=a(382),$=a(41),Q=a(377),Z=a(383),ee=a(373),te=a(170),ae=a.n(te),ne=a(384),re=a(385),oe=a(386),ie=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={searchText:"",searchedColumn:"",Transactions:[],loading:!0},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,o=t.selectedKeys,i=t.confirm,c=t.clearFilters;return r.a.createElement("div",{style:{padding:8}},r.a.createElement(H.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:o[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(o,i,e)},style:{width:188,marginBottom:8,display:"block"}}),r.a.createElement(J.b,null,r.a.createElement($.a,{type:"primary",onClick:function(){return a.handleSearch(o,i,e)},icon:r.a.createElement(ne.a,null),size:"small",style:{width:90}},"Search"),r.a.createElement($.a,{onClick:function(){return a.handleReset(c)},size:"small",style:{width:90}},"Reset")))},filterIcon:function(e){return r.a.createElement(ne.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e]?a[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return a.searchInput.select()})},render:function(t){return a.state.searchedColumn===e?r.a.createElement(ae.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t?t.toString():""}):t}}},a.openNotificationWithIcon=function(e,t,a){Q.a[e]({message:a,description:t,duration:2})},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.deleteCoupon=function(e){E.a.post("https://stripe-coupons-1.herokuapp.com/api/users/deleteCoupon",{couponId:e.key}).then(function(e){a.openNotificationWithIcon("success","You have successfully deleted the coupon","ERROR"),a.props.handleData()}).catch(function(e){a.openNotificationWithIcon("error","Something Went Wrong","ERROR")})},a.handleReset=function(e){e(),a.setState({searchText:""})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=[Object(N.a)({title:"SNO",dataIndex:"sno",key:"sno"},this.getColumnSearchProps("sno")),Object(N.a)({title:"Coupon Name",dataIndex:"couponName",key:"couponName"},this.getColumnSearchProps("couponName")),Object(N.a)({title:"Currency",dataIndex:"currency",key:"currency"},this.getColumnSearchProps("currency")),Object(N.a)({title:"Percent OFF",dataIndex:"percentOff",key:"percentOff"},this.getColumnSearchProps("percentOff")),Object(N.a)({title:"duration",dataIndex:"duration",key:"duration"},this.getColumnSearchProps("duration")),Object(N.a)({title:"duration In Months",dataIndex:"durationInMonths",key:"durationInMonths"},this.getColumnSearchProps("durationInMonths")),{render:function(t){return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement($.a,{onClick:function(){return e.openNotificationWithIcon("info","You can not edit coupon because it is not editable","INFO")}},r.a.createElement(re.a,null)),r.a.createElement(Z.a,{placement:"bottomRight",title:"Are you sure?",onConfirm:function(){return e.deleteCoupon(t)},okText:"Yes",cancelText:"No",okType:"danger"},r.a.createElement($.a,null,r.a.createElement(oe.a,null))))}}],a=!0,n=this.props.userCouponsData,o=[];return n.length>0?(n.forEach(function(e,t){o.push({key:e.id,sno:t+1,couponName:e.name,currency:e.currency,percentOff:e.percent_off,duration:e.duration,durationInMonths:e.duration_in_months})}),a=!1):a=!1,r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{loading:a,pagination:10,columns:t,dataSource:o}))}}]),t}(r.a.Component),ce=a(375),se=a(374),le=a(94),ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={ModalText:"Content of the modal",visible:!1,confirmLoading:!1,loading:!1,buttonLoading:!1},a.setData=function(e){setTimeout(function(){a.setState({data:e,loading:!1})},1e3)},a.showModal=function(e){a.setState({visible:!0,loading:!0})},a.openNotificationWithIcon=function(e,t,a){Q.a[e]({message:a,description:t,duration:2})},a.handleOk=function(){a.setState({ModalText:"The modal will be closed after two seconds",confirmLoading:!0}),setTimeout(function(){a.setState({visible:!1,confirmLoading:!1})},1e3)},a.handleCancel=function(){a.setState({visible:!1,loading:!1,data:null,buttonLoading:!1})},a.addCoupon=function(e){a.setState({buttonLoading:!0},function(){var t={couponName:e.couponName,currency:e.currency,percentOff:e.percentOff,duration:e.duration,durationInMonths:e.durationInMonths};E.a.post("https://stripe-coupons-1.herokuapp.com/api/users/createCoupon",{addDoc:t}).then(function(e){e.data.error?a.openNotificationWithIcon("error","Something Went Wrong","ERROR"):(a.openNotificationWithIcon("success","You have successfully create a coupon","SUCCESS"),a.handleCancel(),a.props.handleData())}).catch(function(e){a.openNotificationWithIcon("error","Something Went Wrong","ERROR")})})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.confirmLoading,o=t.loading,i=t.data,c=t.buttonLoading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{title:"Coupon Add",visible:a,onOk:this.handleOk,confirmLoading:n,onCancel:this.handleCancel,width:"90%",centered:!0,footer:o&&null},r.a.createElement(se.a,{className:"login-form",initialValues:i&&{remember:!1,description:"",amount:"",transactionType:""},style:{width:"100%",height:"400px"},onFinish:function(t){return e.addCoupon(t)}},r.a.createElement("h1",{style:{textAlign:"center"}},"ADD Coupon"),r.a.createElement(se.a.Item,{name:"couponName",rules:[{required:!0,message:"Please input your Coupon Name!"}]},r.a.createElement(H.a,{placeholder:"Coupon Name"})),r.a.createElement(se.a.Item,{name:"currency",rules:[{required:!0,message:"Please provide the currency."}]},r.a.createElement(le.a,{placeholder:"Select a Currency",allowClear:!0},r.a.createElement(le.a.Option,{value:"PKR"},"PKR"),r.a.createElement(le.a.Option,{value:"USD"},"USD"))),r.a.createElement(se.a.Item,{name:"duration",rules:[{required:!0,message:"Please provide the duration."}]},r.a.createElement(le.a,{placeholder:"Select a Duration",allowClear:!0},r.a.createElement(le.a.Option,{value:"repeating"},"repeating"))),r.a.createElement(se.a.Item,{name:"percentOff",rules:[{required:!0,message:"Please input your percent Off"}]},r.a.createElement(H.a,{placeholder:"Percent OFF",type:"number"})),r.a.createElement(se.a.Item,{name:"durationInMonths",rules:[{required:!0,message:"Please input your coupon duration in months"}]},r.a.createElement(H.a,{placeholder:"Duration In Months",type:"number"})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement($.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:c},"Add Coupon")))))}}]),t}(r.a.Component),de=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e.getAllData=Object(B.a)(X.a.mark(function t(){var a,n;return X.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("https://stripe-coupons-1.herokuapp.com/api/users/getAllCoupons");case 2:a=t.sent,n=a.data.coupons||[],console.log(n),e.setState({coupons:n});case 6:case"end":return t.stop()}},t,this)})),e.state={coupons:[]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(B.a)(X.a.mark(function e(){return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.getAllData();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.auth.user;return r.a.createElement("div",{style:{height:"75vh"},className:"container valign-wrapper"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"landing-copy col s12 center-align"},r.a.createElement("h4",null,r.a.createElement("b",null,"Hey there,")," ",t.name.split(" ")[0],r.a.createElement("p",{className:"flow-text grey-text text-darken-1"},"You are logged into a Stripe Coupon"," ")),r.a.createElement("button",{style:{width:"250px",borderRadius:"3px",letterSpacing:"1.0px",marginTop:"1rem"},onClick:this.onLogoutClick,className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Logout"),r.a.createElement("br",null),r.a.createElement("button",{style:{width:"250px",borderRadius:"3px",letterSpacing:"1.0px",marginTop:"1rem"},onClick:function(){return e.atmodal.showModal()},className:"btn btn-large waves-effect waves-light hoverable blue accent-3"},"Add Coupon"))),r.a.createElement(ie,{userCouponsData:this.state.coupons,handleData:this.getAllData}),r.a.createElement(ue,{ref:function(t){return e.atmodal=t},handleData:this.getAllData}))}}]),t}(n.Component),me=Object(w.b)(function(e){return{auth:e.auth}},{logoutUser:O})(de);a(365);if(localStorage.jwtToken){var he=localStorage.jwtToken;b(he);var pe=g()(he);T.dispatch(y(pe));var fe=Date.now()/1e3;pe.exp<fe&&(T.dispatch(O()),window.location.href="/")}var ge=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(w.a,{store:T},r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{exact:!0,path:"/",component:Y}),r.a.createElement(p.a,null,r.a.createElement(K,{exact:!0,path:"/dashboard",component:me})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(367);i.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[197,2,1]]]);
//# sourceMappingURL=main.a7ead8a6.chunk.js.map